<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Family Game - Continuous Version</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #FF6B6B;
            --secondary: #4ECDC4;
            --dark: #2C3E50;
            --success: #2ecc71;
            --danger: #e74c3c;
        }
        body {
            font-family: 'Segoe UI', Arial, sans-serif;
            background: linear-gradient(135deg, #fbc2eb 0%, #a6c1ee 100%);
            margin: 0; padding: 10px; display: flex; justify-content: center; min-height: 100vh;
        }
        .app-container {
            max-width: 1200px; width: 100%; background: rgba(255, 255, 255, 0.95);
            border-radius: 50px; box-shadow: 0 30px 60px rgba(0,0,0,0.3);
            padding: 40px; text-align: center; position: relative;
        }

        /* Ø²Ø± Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ© */
        .home-btn {
            position: absolute; top: 20px; left: 20px;
            background: var(--dark); color: white; padding: 15px 25px;
            border-radius: 20px; text-decoration: none; font-size: 20px; font-weight: bold;
        }

        .family-grid {
            display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 20px; margin-bottom: 30px; margin-top: 60px;
        }
        .family-card {
            background: white; border: 5px solid #eee; border-radius: 35px;
            padding: 15px; cursor: pointer; transition: 0.3s;
        }
        .family-card:hover { transform: scale(1.05); border-color: var(--secondary); }
        .family-card img { width: 130px; height: 130px; border-radius: 50%; }
        .family-card h3 { font-size: 28px; margin: 10px 0; }

        .quiz-section {
            background: #fff; padding: 30px; border-radius: 40px; border: 6px dashed var(--primary);
        }
        
        /* Ø­Ø¬Ù… Ø¶Ø®Ù… Ø¬Ø¯Ø§Ù‹ Ù„Ù„Ø¯Ø§ØªØ§ Ø´Ùˆ */
        #target-name { 
            font-size: 110px; color: var(--primary); font-weight: 900; 
            display: block; margin: 15px 0; text-transform: uppercase;
        }

        .feedback { font-size: 45px; font-weight: bold; height: 60px; margin-top: 10px; }
        
        .repeat-btn { 
            background: var(--secondary); color: white; border: none; 
            padding: 15px 30px; border-radius: 20px; cursor: pointer; font-size: 24px; 
        }
    </style>
</head>
<body>

<div class="app-container">
    <a href="../../../english.php" class="home-btn"><i class="fas fa-arrow-left"></i> Dashboard</a>
    
    <div class="family-grid" id="familyGrid"></div>

    <div class="quiz-section">
        <p style="font-size: 24px; font-weight: bold;">Click on the correct picture!</p>
        <h2 style="font-size: 35px; margin:0;">WHO IS:</h2>
        <span id="target-name">...</span>
        <button class="repeat-btn" onclick="speakQuestion()">
            <i class="fas fa-volume-up"></i> HEAR AGAIN
        </button>
        <div id="feedback" class="feedback"></div>
    </div>
</div>

<audio id="applause" src="https://www.soundjay.com/human/sounds/applause-01.mp3"></audio>
<audio id="error-snd" src="https://www.soundjay.com/buttons/sounds/button-05.mp3"></audio>

<script>
    const familyMembers = [
        { name: 'Dad', arabic: 'Ø§Ù„Ø£Ø¨', img: 'https://cdn-icons-png.flaticon.com/512/4140/4140048.png' },
        { name: 'Mom', arabic: 'Ø§Ù„Ø£Ù…', img: 'https://cdn-icons-png.flaticon.com/512/4140/4140047.png' },
        { name: 'Uncle', arabic: 'Ø§Ù„Ø¹Ù…/Ø§Ù„Ø®Ø§Ù„', img: 'https://cdn-icons-png.flaticon.com/512/4140/4140061.png' },
        { name: 'Aunt', arabic: 'Ø§Ù„Ø¹Ù…Ø©/Ø§Ù„Ø®Ø§Ù„Ø©', img: 'https://cdn-icons-png.flaticon.com/512/4140/4140045.png' },
        { name: 'Cousin', arabic: 'Ø§Ø¨Ù† Ø§Ù„Ø¹Ù…', img: 'https://cdn-icons-png.flaticon.com/512/4140/4140039.png' },
        { name: 'Grandpa', arabic: 'Ø§Ù„Ø¬Ø¯', img: 'https://cdn-icons-png.flaticon.com/512/4140/4140052.png' },
        { name: 'Grandma', arabic: 'Ø§Ù„Ø¬Ø¯Ø©', img: 'https://cdn-icons-png.flaticon.com/512/4140/4140051.png' }
    ];

    let currentTarget = "";
    let isWaiting = false; // Ù„Ù…Ù†Ø¹ Ø§Ù„Ø¶ØºØ· Ø§Ù„Ù…ØªÙƒØ±Ø± Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„

    function initApp() {
        const grid = document.getElementById('familyGrid');
        grid.innerHTML = "";
        familyMembers.forEach(member => {
            const card = document.createElement('div');
            card.className = 'family-card';
            card.onclick = () => checkAnswer(member.name);
            card.innerHTML = `
                <img src="${member.img}">
                <h3>${member.name}</h3>
            `;
            grid.appendChild(card);
        });
        generateQuestion();
    }

    function generateQuestion() {
        isWaiting = false;
        const random = familyMembers[Math.floor(Math.random() * familyMembers.length)];
        currentTarget = random.name;
        document.getElementById('target-name').textContent = currentTarget;
        document.getElementById('feedback').textContent = "";
        speakQuestion();
    }

    function speakQuestion() {
        speak("Where is " + currentTarget + "?");
    }

    function checkAnswer(selected) {
        if(isWaiting) return; // Ù…Ù†Ø¹ Ø§Ù„Ø¶ØºØ· Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ø³Ø¤Ø§Ù„ Ù‚ÙŠØ¯ Ø§Ù„ØªØ¨Ø¯ÙŠÙ„

        const fb = document.getElementById('feedback');
        if(selected === currentTarget) {
            isWaiting = true;
            fb.innerText = "Excellent! ğŸ‘";
            fb.style.color = "var(--success)";
            document.getElementById('applause').play();
            speak("Yes, that is " + selected);
            // Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ù„Ù„Ø³Ø¤Ø§Ù„ Ø§Ù„ØªØ§Ù„ÙŠ Ø¨Ø¹Ø¯ 3 Ø«ÙˆØ§Ù†ÙŠ Ø¨Ø§Ù„Ø¶Ø¨Ø·
            setTimeout(generateQuestion, 3000);
        } else {
            fb.innerText = "Try again! ğŸ˜Š";
            fb.style.color = "var(--danger)";
            document.getElementById('error-snd').play();
            speak("No, that is " + selected);
        }
    }

    function speak(text) {
        window.speechSynthesis.cancel();
        const msg = new SpeechSynthesisUtterance(text);
        msg.lang = 'en-US';
        msg.volume = 1.0;
        msg.rate = 0.8;
        window.speechSynthesis.speak(msg);
    }

    window.onload = initApp;
</script>
</body>
</html>