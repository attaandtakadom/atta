name: Telegram Notification
on: [push]

jobs:
  telegram_job:
    runs-on: ubuntu-latest
    steps:
      - name: Send Clean Notification
        run: |
          # ุงุณุชุฎุฑุงุฌ ุฑุณุงูุฉ ุงูููููุช
          MSG="${{ github.event.head_commit.message }}"
          
          # ุดุฑุท: ุฅุฐุง ูุงูุช ุงูุฑุณุงูุฉ ุชุญุชูู ุนูู ูููุฉ 'Merge' ุฃู 'Update notify' ููุง ุชุฑุณู ุฅุดุนุงุฑุงู
          if [[ "$MSG" == *"Merge"* ]] || [[ "$MSG" == *"Update notify"* ]]; then
            echo "ุฅุดุนุงุฑ ุชููู - ูู ูุชู ุงูุฅุฑุณุงู ููุชูุฌุฑุงู"
            exit 0
          fi

          # ุฅุฑุณุงู ุงูุฑุณุงูุฉ ุฅุฐุง ูุงูุช "ููุจููุฉ" ูุชุนุจุฑ ุนู ุฏุฑุณ ุฌุฏูุฏ
          curl -s -X POST https://api.telegram.org/bot${{ secrets.TELEGRAM_TOKEN }}/sendMessage \
          -d chat_id=${{ secrets.TELEGRAM_CHAT_ID }} \
          -d text="๐ **ุชุญุฏูุซ ุฌุฏูุฏ ูู ุงูููุธููุฉ ุงูุชุนููููุฉ** ๐
          
          ๐ **ุงูุฅุถุงูุฉ:** $MSG
          
          โจ ุชู ุชุญุฏูุซ ุงููุญุชูู ุจูุฌุงุญุ ูููู ููุทูุงุจ ุงูุงุทูุงุน ุงูุขู." \
          -d parse_mode="Markdown"
