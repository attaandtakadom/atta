<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Family Learning Game - With Question Voice</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #FF6B6B;
            --secondary: #4ECDC4;
            --dark: #2C3E50;
            --success: #2ecc71;
            --danger: #e74c3c;
        }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #fbc2eb 0%, #a6c1ee 100%);
            margin: 0; padding: 20px; display: flex; justify-content: center; min-height: 100vh;
        }
        .app-container {
            max-width: 950px; width: 100%; background: rgba(255, 255, 255, 0.95);
            border-radius: 40px; box-shadow: 0 20px 50px rgba(0,0,0,0.2);
            padding: 30px; text-align: center;
        }
        .family-grid {
            display: grid; grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 20px; margin-bottom: 30px;
        }
        .family-card {
            background: white; border: 3px solid #eee; border-radius: 25px;
            padding: 15px; cursor: pointer; transition: 0.3s; position: relative;
        }
        .family-card:hover { transform: translateY(-10px); border-color: var(--secondary); }
        .family-card img { width: 90px; height: 90px; border-radius: 50%; margin-bottom: 10px; }
        
        .speaker-btn {
            background: var(--secondary); color: white; border-radius: 50%;
            width: 35px; height: 35px; line-height: 35px; display: inline-block; margin-top: 5px;
        }

        .quiz-section {
            background: #f9f9f9; padding: 25px; border-radius: 30px; border: 4px dashed var(--primary);
        }
        .instruction-text { color: #576574; font-size: 18px; margin-bottom: 5px; }
        #target-name { font-size: 55px; color: var(--primary); font-weight: 900; display: block; margin: 10px 0; }
        .feedback { font-size: 26px; font-weight: bold; min-height: 40px; margin-top: 15px; }

        .btn-music { background: var(--dark); color: white; border: none; padding: 10px 20px; border-radius: 20px; cursor: pointer; margin-bottom: 20px; }
        
        /* Ø²Ø± Ø¥Ø¹Ø§Ø¯Ø© Ø³Ù…Ø§Ø¹ Ø§Ù„Ø³Ø¤Ø§Ù„ */
        .repeat-btn {
            background: var(--primary); color: white; border: none; padding: 8px 15px; 
            border-radius: 15px; cursor: pointer; font-size: 16px; margin-top: 10px;
        }
    </style>
</head>
<body>

<div class="app-container">
    <button class="btn-music" onclick="toggleMusic()"><i class="fas fa-music"></i> ØªØ´ØºÙŠÙ„/Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ù…ÙˆØ³ÙŠÙ‚Ù‰</button>
    
    <h1>Family Members Tree</h1>
    <div class="family-grid" id="familyGrid"></div>

    <div class="quiz-section">
        <p class="instruction-text">Click on the correct picture above!</p>
        <h2 style="margin:0">Who is:</h2>
        <span id="target-name">...</span>
        <button class="repeat-btn" onclick="speakQuestion()">
            <i class="fas fa-volume-up"></i> Listen to Question
        </button>
        <div id="feedback" class="feedback"></div>
    </div>
</div>

<audio id="bg-music" loop src="https://www.soundjay.com/free-music/sounds/barn-beat-01.mp3"></audio>
<audio id="applause-sound" src="https://www.soundjay.com/human/sounds/applause-01.mp3"></audio>
<audio id="error-sound" src="https://www.soundjay.com/buttons/sounds/button-05.mp3"></audio>

<script>
    const familyMembers = [
        { name: 'Dad', arabic: 'Ø¨Ø§Ø¨Ø§', img: 'https://cdn-icons-png.flaticon.com/512/4140/4140048.png' },
        { name: 'Mom', arabic: 'Ù…Ø§Ù…Ø§', img: 'https://cdn-icons-png.flaticon.com/512/4140/4140047.png' },
        { name: 'Uncle', arabic: 'Ø§Ù„Ø¹Ù…/Ø§Ù„Ø®Ø§Ù„', img: 'https://cdn-icons-png.flaticon.com/512/4140/4140061.png' },
        { name: 'Aunt', arabic: 'Ø§Ù„Ø¹Ù…Ø©/Ø§Ù„Ø®Ø§Ù„Ø©', img: 'https://cdn-icons-png.flaticon.com/512/4140/4140045.png' },
        { name: 'Cousin', arabic: 'Ø§Ø¨Ù† Ø§Ù„Ø¹Ù…/Ø§Ù„Ø®Ø§Ù„', img: 'https://cdn-icons-png.flaticon.com/512/4140/4140039.png' },
        { name: 'Grandpa', arabic: 'Ø§Ù„Ø¬Ø¯', img: 'https://cdn-icons-png.flaticon.com/512/4140/4140052.png' },
        { name: 'Grandma', arabic: 'Ø§Ù„Ø¬Ø¯Ø©', img: 'https://cdn-icons-png.flaticon.com/512/4140/4140051.png' },
        { name: 'Brother', arabic: 'Ø§Ù„Ø£Ø®', img: 'https://cdn-icons-png.flaticon.com/512/4140/4140037.png' },
        { name: 'Sister', arabic: 'Ø§Ù„Ø£Ø®Øª', img: 'https://cdn-icons-png.flaticon.com/512/4140/4140040.png' }
    ];

    let currentTarget = "";

    function initApp() {
        const grid = document.getElementById('familyGrid');
        familyMembers.forEach(member => {
            const card = document.createElement('div');
            card.className = 'family-card';
            card.onclick = () => handleChoice(member.name);
            card.innerHTML = `
                <img src="${member.img}">
                <h3>${member.name}</h3>
                <p style="color:#666; font-size:14px; margin:0">${member.arabic}</p>
                <div class="speaker-btn"><i class="fas fa-volume-up"></i></div>
            `;
            grid.appendChild(card);
        });
        generateQuestion();
    }

    function generateQuestion() {
        const random = familyMembers[Math.floor(Math.random() * familyMembers.length)];
        currentTarget = random.name;
        document.getElementById('target-name').textContent = currentTarget;
        document.getElementById('feedback').textContent = "";
        
        // Ù†Ø·Ù‚ Ø§Ù„Ø³Ø¤Ø§Ù„ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ ÙÙˆØ± Ø¸Ù‡ÙˆØ±Ù‡
        setTimeout(speakQuestion, 500); 
    }

    function speakQuestion() {
        speak("Where is " + currentTarget + "?");
    }

    function handleChoice(selectedName) {
        const feedback = document.getElementById('feedback');
        if(selectedName === currentTarget) {
            feedback.textContent = "Excellent! ğŸ‘ğŸŒŸ";
            feedback.style.color = "var(--success)";
            document.getElementById('applause-sound').play();
            speak("Yes! That is " + selectedName);
            setTimeout(generateQuestion, 3000);
        } else {
            feedback.textContent = "No, that's " + selectedName + "! Try again ğŸ˜Š";
            feedback.style.color = "var(--danger)";
            document.getElementById('error-sound').play();
            speak("No, that is " + selectedName + ". Try again.");
        }
    }

    function speak(text) {
        // Ø¥Ù„ØºØ§Ø¡ Ø£ÙŠ Ù†Ø·Ù‚ Ø¬Ø§Ø±ÙŠ Ø­Ø§Ù„ÙŠØ§Ù‹ Ù„ØªØ¬Ù†Ø¨ ØªØ¯Ø§Ø®Ù„ Ø§Ù„Ø£ØµÙˆØ§Øª
        window.speechSynthesis.cancel();
        const msg = new SpeechSynthesisUtterance(text);
        msg.lang = 'en-US';
        msg.rate = 0.9; // Ø³Ø±Ø¹Ø© Ø§Ù„Ù†Ø·Ù‚ (Ø£Ø¨Ø·Ø£ Ù‚Ù„ÙŠÙ„Ø§Ù‹ Ù„Ù„ØªØ¹Ù„Ù…)
        window.speechSynthesis.speak(msg);
    }

    let isMusicOn = false;
    function toggleMusic() {
        const music = document.getElementById('bg-music');
        if(!isMusicOn) { music.play(); isMusicOn = true; }
        else { music.pause(); isMusicOn = false; }
    }

    window.onload = initApp;
</script>
</body>
</html>