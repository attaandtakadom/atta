<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Ù‚ÙˆØ§Ø¹Ø¯ Ù„ØºÙˆÙŠØ©: Ø§Ù„Ø¬Ù…Ù„Ø© Ø§Ù„Ù…ÙÙŠØ¯Ø©</title>
<style>
:root { 
    --primary: #2196F3; 
    --secondary: #4CAF50; 
    --accent: #FFC107; 
    --error: #f44336;
    --success: #4CAF50;
}

* {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
}

body { 
    font-family: 'Segoe UI', Tahoma, sans-serif; 
    background: linear-gradient(135deg, #e3f2fd 0%, #f3e5f5 100%);
    margin: 0; 
    padding: 15px; 
    text-align: center;
    min-height: 100vh;
}

.container { 
    max-width: 600px; 
    background: white; 
    margin: 20px auto; 
    padding: 25px; 
    border-radius: 25px; 
    border: 5px solid var(--primary); 
    box-shadow: 0 15px 30px rgba(0,0,0,0.15); 
    position: relative;
    overflow: hidden;
}

.container::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 5px;
    background: linear-gradient(90deg, var(--primary), var(--secondary), var(--accent));
}

.mhome { 
    display: inline-block; 
    padding: 12px 28px; 
    background: linear-gradient(135deg, #0d47a1, #1976d2); 
    color: white; 
    text-decoration: none; 
    border-radius: 50px; 
    font-weight: bold; 
    margin-bottom: 25px; 
    box-shadow: 0 6px 15px rgba(13, 71, 161, 0.3);
    transition: all 0.3s;
    border: 2px solid white;
}

.mhome:hover {
    transform: translateY(-3px);
    box-shadow: 0 8px 20px rgba(13, 71, 161, 0.4);
}

h1 { 
    color: #0d47a1; 
    font-size: 1.6rem;
    margin-bottom: 20px;
    padding-bottom: 10px;
    border-bottom: 3px solid var(--accent);
    display: inline-block;
}

.section { 
    background: linear-gradient(to left, #f9f9f9, #ffffff); 
    padding: 20px; 
    border-radius: 20px; 
    margin-bottom: 25px; 
    border-right: 5px solid var(--primary); 
    text-align: right;
    box-shadow: 0 5px 15px rgba(0,0,0,0.05);
}

.quran-text { 
    background: linear-gradient(to right, #fff9c4, #fffde7); 
    padding: 20px; 
    border-radius: 15px; 
    font-size: 1.2rem; 
    line-height: 1.8; 
    color: #5d4037; 
    margin: 15px 0; 
    border: 2px dashed #fbc02d;
    text-align: center;
    direction: rtl;
}

.question-box { 
    background: linear-gradient(to left, #e8f5e9, #f1f8e9); 
    padding: 20px; 
    border-radius: 20px; 
    margin-top: 15px; 
    border: 2px solid #c8e6c9; 
}

.btn { 
    background: linear-gradient(135deg, var(--secondary), #43a047); 
    color: white; 
    border: none; 
    padding: 15px 25px; 
    border-radius: 15px; 
    cursor: pointer; 
    font-size: 1.1rem; 
    width: 100%; 
    margin: 12px 0; 
    font-weight: bold;
    transition: all 0.3s;
    box-shadow: 0 6px 0 #2e7d32;
    position: relative;
    overflow: hidden;
}

.btn::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(255,255,255,0.1);
    transform: translateX(-100%);
    transition: transform 0.3s;
}

.btn:hover::after {
    transform: translateX(100%);
}

.btn:active {
    transform: translateY(4px);
    box-shadow: 0 2px 0 #2e7d32;
}

.btn-alt {
    background: linear-gradient(135deg, var(--primary), #1976d2);
    box-shadow: 0 6px 0 #1565c0;
}

.conclusion { 
    background: linear-gradient(to left, #fff3e0, #fff8e1); 
    padding: 20px; 
    border-radius: 20px; 
    border: 3px solid #ff9800; 
    font-weight: bold; 
    color: #e65100; 
    font-size: 1.3rem;
    margin: 20px 0;
    text-align: center;
}

/* ØªÙ…Ø±ÙŠÙ† Ø§Ù„Ø¹ØµØ§ÙÙŠØ± */
.birds-container { 
    display: flex; 
    justify-content: center; 
    flex-wrap: wrap; 
    margin: 25px 0; 
    gap: 15px;
}

.bird { 
    background: white; 
    border: 3px solid var(--primary); 
    padding: 15px; 
    border-radius: 50% 50% 0 50%; 
    position: relative; 
    width: 90px; 
    height: 90px;
    font-weight: bold; 
    color: var(--primary); 
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 5px 15px rgba(33, 150, 243, 0.2);
    transition: all 0.3s;
    cursor: pointer;
}

.bird:hover {
    transform: translateY(-5px);
    box-shadow: 0 8px 20px rgba(33, 150, 243, 0.3);
}

.bird::after {
    content: 'ğŸ¦';
    position: absolute;
    top: -10px;
    right: -10px;
    font-size: 1.5rem;
}

input[type="text"] { 
    width: 100%; 
    padding: 15px; 
    margin: 12px 0; 
    border: 3px solid #ddd; 
    border-radius: 12px; 
    box-sizing: border-box; 
    text-align: center; 
    font-size: 1.2rem;
    font-weight: bold;
    transition: all 0.3s;
    background: #f9f9f9;
}

input[type="text"]:focus {
    border-color: var(--primary);
    background: white;
    box-shadow: 0 0 0 3px rgba(33, 150, 243, 0.1);
    outline: none;
}

.kid-img { 
    width: 140px; 
    margin: 20px auto;
    display: block;
    filter: drop-shadow(0 5px 15px rgba(0,0,0,0.1));
}

.feedback { 
    font-weight: bold; 
    margin: 15px; 
    padding: 15px;
    border-radius: 12px;
    font-size: 1.2rem;
    text-align: center;
    animation: fadeIn 0.5s;
}

@keyframes fadeIn {
    from { opacity: 0; transform: translateY(-10px); }
    to { opacity: 1; transform: translateY(0); }
}

.success-feedback {
    background: linear-gradient(to right, #c8e6c9, #dcedc8);
    color: #2e7d32;
    border: 2px solid #4CAF50;
}

.error-feedback {
    background: linear-gradient(to right, #ffebee, #ffcdd2);
    color: #c62828;
    border: 2px solid #f44336;
}

.step { 
    display: none; 
    animation: slideIn 0.5s;
}

@keyframes slideIn {
    from { opacity: 0; transform: translateX(20px); }
    to { opacity: 1; transform: translateX(0); }
}

.active { 
    display: block; 
}

.score-container {
    position: fixed;
    top: 20px;
    left: 20px;
    background: white;
    padding: 10px 20px;
    border-radius: 50px;
    box-shadow: 0 5px 15px rgba(0,0,0,0.1);
    font-weight: bold;
    color: var(--primary);
    border: 2px solid var(--primary);
    z-index: 1000;
}

.score-container span {
    color: var(--secondary);
    font-size: 1.5rem;
    margin-right: 5px;
}

/* ØªØ£Ø«ÙŠØ±Ø§Øª Ø¨ØµØ±ÙŠØ© */
.correct-answer {
    animation: correctPulse 0.5s;
    border-color: var(--success) !important;
    background: #e8f5e9 !important;
}

@keyframes correctPulse {
    0% { transform: scale(1); }
    50% { transform: scale(1.05); }
    100% { transform: scale(1); }
}

.wrong-answer {
    animation: shake 0.5s;
    border-color: var(--error) !important;
    background: #ffebee !important;
}

@keyframes shake {
    0%, 100% { transform: translateX(0); }
    25% { transform: translateX(-10px); }
    75% { transform: translateX(10px); }
}

.completion-celebration {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(255, 255, 255, 0.9);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 2000;
    animation: fadeIn 0.5s;
}

.completion-celebration h2 {
    font-size: 3rem;
    color: var(--primary);
    text-shadow: 3px 3px 0 var(--accent);
    animation: bounce 1s infinite;
}

@keyframes bounce {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-20px); }
}

@media (max-width: 768px) {
    .container {
        padding: 20px;
        margin: 10px auto;
    }
    
    .bird {
        width: 80px;
        height: 80px;
        font-size: 0.9rem;
    }
    
    h1 {
        font-size: 1.4rem;
    }
    
    .score-container {
        position: relative;
        top: 0;
        left: 0;
        margin: 10px auto;
        width: fit-content;
    }
}

/* ØªØ­Ø³ÙŠÙ†Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ© Ù„Ù„Ø¹ØµØ§ÙÙŠØ± */
.bird-profession {
    background: linear-gradient(135deg, #ffeb3b, #ffc107);
    border-color: #ff9800;
    color: #5d4037;
}

.bird-profession::after {
    content: 'ğŸ‘¨â€ğŸ³';
}

.bird-light {
    background: linear-gradient(135deg, #e1f5fe, #b3e5fc);
    border-color: #03a9f4;
}

.bird-nectar {
    background: linear-gradient(135deg, #fce4ec, #f8bbd9);
    border-color: #e91e63;
}

.bird-truth {
    background: linear-gradient(135deg, #e8f5e9, #c8e6c9);
    border-color: #4caf50;
}
</style>
</head>

<body>
<!-- Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ù†Ù‚Ø§Ø· -->
<div class="score-container">
    Ø§Ù„Ù†Ù‚Ø§Ø·: <span id="score">0</span> ğŸ†
</div>

<div class="container">
    <a href="../../../../../teacher_dashbord/arabic_dashboard.html" class="mhome">ğŸ  Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
    
    <h1>Ù‚ÙˆØ§Ø¹Ø¯ Ù„ØºÙˆÙŠØ©: Ø§Ù„Ø¬Ù…Ù„Ø© Ø§Ù„Ù…ÙÙŠØ¯Ø©</h1>
    
    <!-- Ø§Ù„Ø®Ø·ÙˆØ© 1 -->
    <div id="step1" class="step active">
        <div class="section">
            <h3>ğŸ“– Ø£Ù…Ø«Ù„Ø© Ù…Ù† Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ…:</h3>
            <div class="quran-text">
                â€¢ Ø£Ù‚ÙÙ…Ù Ø§Ù„ØµÙ‘ÙÙ„Ø§Ø©Ù <br>
                â€¢ Ù„Ø§ ØªÙØµÙØ¹Ù‘ÙØ±Ù’ Ø®ÙØ¯Ù‘ÙÙƒÙ Ù„ÙÙ„Ù†Ù‘ÙØ§Ø³Ù <br>
                â€¢ Ø§ØµÙ’Ø¨ÙØ±Ù’ Ø¹ÙÙ„ÙÙ‰ Ù…ÙØ§ Ø£ÙØµÙØ§Ø¨ÙÙƒÙ <br>
                â€¢ Ø¥ÙÙ†Ù‘Ù Ø§Ù„Ù„Ù‘ÙÙ‡Ù Ù„Ø§ ÙŠÙØ­ÙØ¨Ù‘Ù ÙƒÙÙ„Ù‘Ù Ù…ÙØ®Ù’ØªØ§Ù„Ù ÙÙØ®ÙÙˆØ±Ù <br>
                â€¢ Ø§ØºÙ’Ø¶ÙØ¶Ù’ Ù…ÙÙ†Ù’ ØµÙÙˆÙ’ØªÙÙƒÙ <br>
                â€¢ Ø¥ÙÙ†Ù‘Ù Ø£ÙÙ†ÙƒÙØ±Ù Ø§Ù„Ø£ÙØµÙ’ÙˆÙØ§ØªÙ Ù„ÙØµÙÙˆÙ’ØªÙ Ø§Ù„Ù’Ø­ÙÙ…ÙÙŠØ±Ù
            </div>
        </div>
        <button class="btn" onclick="nextStep(2)">ØªØ£Ù…Ù„ Ø§Ù„Ø£Ù…Ø«Ù„Ø© ÙˆØ£Ø¬Ø¨ â¤</button>
    </div>
    
    <!-- Ø§Ù„Ø®Ø·ÙˆØ© 2 -->
    <div id="step2" class="step">
        <div class="question-box">
            <p><strong>Ø³1:</strong> Ù…Ù…Ø§ ØªØªØ£Ù„Ù ÙƒÙ„ Ø¬Ù…Ù„Ø©ØŸ</p>
            <button class="btn btn-alt" onclick="checkAnswer('ans1', 'ØªØªØ£Ù„Ù Ù…Ù† Ù…Ø¬Ù…ÙˆØ¹Ø© ÙƒÙ„Ù…Ø§Øª.', true)">Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©</button>
            <p id="ans1" class="feedback"></p>
            
            <p><strong>Ø³2:</strong> Ù‡Ù„ Ø£Ø¹Ø·Øª ÙƒÙ„ Ø¬Ù…Ù„Ø© Ù…Ø¹Ù†Ù‰ ØªØ§Ù…Ø§Ù‹ ÙˆÙ…ÙÙŠØ¯Ø§Ù‹ØŸ</p>
            <button class="btn btn-alt" onclick="checkAnswer('ans2', 'Ù†Ø¹Ù….', true)">Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©</button>
            <p id="ans2" class="feedback"></p>
            
            <p><strong>Ø³3:</strong> Ù…Ø§Ø°Ø§ Ù†Ø³Ù…ÙŠ Ø§Ù„ÙƒÙ„Ø§Ù… Ø§Ù„Ø°ÙŠ ÙŠØ¤Ø¯ÙŠ Ù…Ø¹Ù†Ù‰ ØªØ§Ù…Ø§Ù‹ ÙˆÙ…ÙÙŠØ¯Ø§Ù‹ØŸ</p>
            <button class="btn btn-alt" onclick="checkAnswer('ans3', 'Ù†Ø³Ù…ÙŠÙ‡: Ø¬Ù…Ù„Ø©Ù‹ Ù…ÙÙŠØ¯Ø©Ù‹.', true)">Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©</button>
            <p id="ans3" class="feedback"></p>
        </div>
        
        <div class="conclusion">
            ğŸ’¡ Ø§Ù„Ø§Ø³ØªÙ†ØªØ§Ø¬: <br>
            Ø§Ù„Ø¬Ù…Ù„Ø© Ø§Ù„Ù…ÙÙŠØ¯Ø© ØªØªÙƒÙˆÙ† Ù…Ù† ÙƒÙ„Ù…Ø§Øª ØªØ¤Ø¯ÙŠ Ù…Ø¹Ù†Ù‰ ØªØ§Ù…Ø§Ù‹.
        </div>
        <button class="btn" onclick="nextStep(3)">Ø§Ù†ØªÙ‚Ù„ Ù„Ù„ØªÙ…Ø§Ø±ÙŠÙ† âœ¨</button>
    </div>
    
    <!-- Ø§Ù„Ø®Ø·ÙˆØ© 3 -->
    <div id="step3" class="step">
        <h3>ğŸ§© Ø±ØªØ¨ Ø§Ù„ÙƒÙ„Ù…Ø§Øª Ù„ØªØ¹Ø·ÙŠ Ù…Ø¹Ù†Ù‰ ØªØ§Ù…Ø§Ù‹:</h3>
        <div class="section">
            <p>(Ø§Ù„Ù…Ø¤Ù…Ù† - Ø§Ù„ØµÙ„Ø§Ø© - Ø¹Ù„Ù‰ - ÙŠØ­Ø±Øµ)</p>
            <input type="text" id="order1" placeholder="Ø§ÙƒØªØ¨ Ø§Ù„Ø¬Ù…Ù„Ø© Ù‡Ù†Ø§">
            <button class="btn btn-alt" onclick="checkOrder(1)">ØªØ­Ù‚Ù‚</button>
            <p id="feedback1" class="feedback"></p>
            
            <p>(Ø§Ù„Ù†Ø¸Ø§ÙØ© - Ø§Ù„Ø¥ÙŠÙ…Ø§Ù† - Ù…Ù†)</p>
            <input type="text" id="order2" placeholder="Ø§ÙƒØªØ¨ Ø§Ù„Ø¬Ù…Ù„Ø© Ù‡Ù†Ø§">
            <button class="btn btn-alt" onclick="checkOrder(2)">ØªØ­Ù‚Ù‚</button>
            <p id="feedback2" class="feedback"></p>
            
            <p>(ÙÙŠ - Ù‚ÙˆØ© - Ø§Ù„Ø§ØªØ­Ø§Ø¯)</p>
            <input type="text" id="order3" placeholder="Ø§ÙƒØªØ¨ Ø§Ù„Ø¬Ù…Ù„Ø© Ù‡Ù†Ø§">
            <button class="btn btn-alt" onclick="checkOrder(3)">ØªØ­Ù‚Ù‚</button>
            <p id="feedback3" class="feedback"></p>
        </div>
        
        <div id="step3-feedback" class="feedback"></div>
        <button class="btn" onclick="nextStep(4)" id="nextToStep4" style="display:none;">Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ù„Ù„Ø¹ØµØ§ÙÙŠØ± ğŸ¦</button>
    </div>
    
    <!-- Ø§Ù„Ø®Ø·ÙˆØ© 4 - ØªÙ… ØªØºÙŠÙŠØ± "Ø§Ù„Ø®Ø¨Ø²" Ø¥Ù„Ù‰ "Ø§Ù„Ø®Ø¨Ø§Ø²" -->
    <div id="step4" class="step">
        <h3>ğŸ¦ ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ø¹ØµØ§ÙÙŠØ±:</h3>
        <div class="birds-container">
            <div class="bird bird-light" onclick="fillGap('gap1', 'Ù†ÙˆØ±')">Ù†ÙˆØ± âœ¨</div>
            <div class="bird bird-nectar" onclick="fillGap('gap2', 'Ø§Ù„Ø±Ø­ÙŠÙ‚')">Ø§Ù„Ø±Ø­ÙŠÙ‚ ğŸŒ¸</div>
            <div class="bird bird-profession" onclick="fillGap('gap3', 'Ø§Ù„Ø®Ø¨Ø§Ø²')">Ø§Ù„Ø®Ø¨Ø§Ø² ğŸ‘¨â€ğŸ³</div>
            <div class="bird bird-truth" onclick="fillGap('gap4', 'Ø§Ù„Ø­Ù‚')">Ø§Ù„Ø­Ù‚ âš–ï¸</div>
        </div>
        
        <div class="section">
            <p>Ø§Ù„Ø¹Ù„Ù… <input type="text" id="gap1" style="width:150px" placeholder="Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ø¹ØµÙÙˆØ±"> </p>
            <p>ÙŠÙ…ØªØµ Ø§Ù„Ù†Ø­Ù„ <input type="text" id="gap2" style="width:150px" placeholder="Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ø¹ØµÙÙˆØ±"> </p>
            <p>ÙŠÙ†Ø®Ù„ <input type="text" id="gap3" style="width:150px" placeholder="Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ø¹ØµÙÙˆØ±"> Ø§Ù„Ø¯Ù‚ÙŠÙ‚</p>
            <p>Ø§Ù†ØªØµØ± <input type="text" id="gap4" style="width:150px" placeholder="Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ø¹ØµÙÙˆØ±"> </p>
        </div>
        
        <div id="final-feedback" class="feedback"></div>
        <button class="btn" onclick="checkFinal()">Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ø¯Ø±Ø³ âœ“</button>
    </div>
    
    <img src="https://img.freepik.com/free-vector/laughing-boy-face-emotions_1308-46602.jpg" class="kid-img" alt="ÙˆÙ„Ø¯ ÙŠØ¶Ø­Ùƒ">
    
    <br>
    <a href="../../../../../teacher_dashbord/arabic_dashboard.html" class="mhome" style="margin-top:20px">ğŸ  Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
</div>

<!-- Ø¹Ù†Ø§ØµØ± Ø§Ù„ØµÙˆØª -->
<audio id="bellSound" preload="auto">
    <source src="https://assets.mixkit.co/sfx/preview/mixkit-correct-answer-tone-2870.mp3" type="audio/mpeg">
</audio>

<audio id="applauseSound" preload="auto">
    <source src="https://assets.mixkit.co/sfx/preview/mixkit-winning-chimes-2015.mp3" type="audio/mpeg">
</audio>

<audio id="errorSound" preload="auto">
    <source src="https://assets.mixkit.co/sfx/preview/mixkit-wrong-answer-fail-notification-946.mp3" type="audio/mpeg">
</audio>

<script>
// ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª
let score = 0;
let correctAnswers = 0;
const totalQuestions = 7; // Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø³Ø¦Ù„Ø©
let answeredQuestions = new Set();

// ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø£ØµÙˆØ§Øª Ù…Ø³Ø¨Ù‚Ø§Ù‹
window.addEventListener('load', function() {
    const bell = document.getElementById('bellSound');
    const applause = document.getElementById('applauseSound');
    const error = document.getElementById('errorSound');
    
    // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø£ØµÙˆØ§Øª
    bell.load();
    applause.load();
    error.load();
});

// ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù†Ù‚Ø§Ø·
function updateScore(points) {
    score += points;
    document.getElementById('score').textContent = score;
    
    // ØªØ£Ø«ÙŠØ± Ø¨ØµØ±ÙŠ Ù„Ù„Ù†Ù‚Ø§Ø·
    const scoreElement = document.getElementById('score');
    scoreElement.style.transform = 'scale(1.3)';
    setTimeout(() => {
        scoreElement.style.transform = 'scale(1)';
    }, 300);
}

// ØªØ´ØºÙŠÙ„ Ø§Ù„ØµÙˆØª
function playSound(soundId) {
    const sound = document.getElementById(soundId);
    sound.currentTime = 0;
    sound.play().catch(e => console.log("Ø®Ø·Ø£ ÙÙŠ ØªØ´ØºÙŠÙ„ Ø§Ù„ØµÙˆØª:", e));
}

// Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ù„Ù„Ø®Ø·ÙˆØ© Ø§Ù„ØªØ§Ù„ÙŠØ©
function nextStep(n) {
    document.querySelectorAll('.step').forEach(s => s.classList.remove('active'));
    document.getElementById('step' + n).classList.add('active');
    window.scrollTo(0, 0);
    
    // ØªØ´ØºÙŠÙ„ ØµÙˆØª Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„
    playSound('bellSound');
}

// Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ù†ØµÙŠØ©
function checkAnswer(elementId, correctAnswer, isTrueFalse = false) {
    const element = document.getElementById(elementId);
    const questionId = elementId;
    
    // Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ù‚Ø¯ ØªÙ… Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù†Ù‡Ø§ Ù…Ø³Ø¨Ù‚Ø§Ù‹
    if (answeredQuestions.has(questionId)) {
        element.innerHTML = "Ù„Ù‚Ø¯ Ø£Ø¬Ø¨Øª Ø¹Ù„Ù‰ Ù‡Ø°Ø§ Ø§Ù„Ø³Ø¤Ø§Ù„ Ù…Ø³Ø¨Ù‚Ø§Ù‹!";
        element.className = "feedback success-feedback";
        return;
    }
    
    // Ø¹Ø±Ø¶ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„ØµØ­ÙŠØ­Ø©
    element.innerHTML = `<strong>Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„ØµØ­ÙŠØ­Ø©:</strong> ${correctAnswer}`;
    element.className = "feedback success-feedback";
    
    // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù†Ù‚Ø§Ø· ÙˆØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©
    if (!answeredQuestions.has(questionId)) {
        updateScore(10);
        correctAnswers++;
        answeredQuestions.add(questionId);
        playSound('bellSound');
    }
    
    // ØªØ­Ù‚Ù‚ Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ø¬Ù…ÙŠØ¹ Ø£Ø³Ø¦Ù„Ø© Ù‡Ø°Ù‡ Ø§Ù„Ø®Ø·ÙˆØ© Ù…Ø¬Ø§Ø¨Ø©
    if (document.getElementById('step2').classList.contains('active')) {
        const allQuestions = ['ans1', 'ans2', 'ans3'];
        const allAnswered = allQuestions.every(id => answeredQuestions.has(id));
        
        if (allAnswered) {
            playSound('applauseSound');
            setTimeout(() => {
                document.querySelector('#step2 .conclusion').style.animation = 'correctPulse 1s';
            }, 500);
        }
    }
}

// Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØªØ±ØªÙŠØ¨ Ø§Ù„Ø¬Ù…Ù„
function checkOrder(orderNumber) {
    const input = document.getElementById('order' + orderNumber);
    const feedback = document.getElementById('feedback' + orderNumber);
    const questionId = 'order' + orderNumber;
    
    // Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª Ø§Ù„ØµØ­ÙŠØ­Ø©
    const correctAnswersMap = {
        1: 'ÙŠØ­Ø±Øµ Ø§Ù„Ù…Ø¤Ù…Ù† Ø¹Ù„Ù‰ Ø§Ù„ØµÙ„Ø§Ø©',
        2: 'Ø§Ù„Ù†Ø¸Ø§ÙØ© Ù…Ù† Ø§Ù„Ø¥ÙŠÙ…Ø§Ù†',
        3: 'ÙÙŠ Ø§Ù„Ø§ØªØ­Ø§Ø¯ Ù‚ÙˆØ©'
    };
    
    let userAnswer = input.value.trim().replace(/\s+/g, ' ');
    
    // ØªÙ†Ø¸ÙŠÙ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ù„Ù„ØªØ­Ù‚Ù‚ Ø§Ù„Ù…Ø±Ù†
    const cleanAnswer = (text) => {
        return text
            .replace(/Ø£/g, 'Ø§')
            .replace(/Ø¥/g, 'Ø§')
            .replace(/Ø¢/g, 'Ø§')
            .replace(/Ø©/g, 'Ù‡')
            .replace(/Ù‰/g, 'ÙŠ')
            .toLowerCase();
    };
    
    const userClean = cleanAnswer(userAnswer);
    const correctClean = cleanAnswer(correctAnswersMap[orderNumber]);
    
    if (userClean === correctClean) {
        // Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© ØµØ­ÙŠØ­Ø©
        if (!answeredQuestions.has(questionId)) {
            input.className = 'correct-answer';
            feedback.innerHTML = '<span style="color:green;font-size:1.5rem">âœ“</span> Ø¥Ø¬Ø§Ø¨Ø© ØµØ­ÙŠØ­Ø©! Ø£Ø­Ø³Ù†Øª!';
            feedback.className = 'feedback success-feedback';
            updateScore(15);
            correctAnswers++;
            answeredQuestions.add(questionId);
            playSound('bellSound');
            
            // ØªØ­Ù‚Ù‚ Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© ÙÙŠ Ù‡Ø°Ù‡ Ø§Ù„Ø®Ø·ÙˆØ© Ù…Ø¬Ø§Ø¨Ø©
            const allOrders = [1, 2, 3];
            const allAnswered = allOrders.every(num => answeredQuestions.has('order' + num));
            
            if (allAnswered) {
                document.getElementById('step3-feedback').innerHTML = 
                    '<div style="background:linear-gradient(135deg,#4CAF50,#2E7D32);color:white;padding:20px;border-radius:15px;margin:20px 0;">' +
                    '<h3>ğŸ‰ Ø£Ø­Ø³Ù†Øª! Ø¬Ù…ÙŠØ¹ Ø¥Ø¬Ø§Ø¨Ø§ØªÙƒ ØµØ­ÙŠØ­Ø©</h3>' +
                    '<p>ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ø¢Ù† Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ù„Ù„ØªÙ…Ø±ÙŠÙ† Ø§Ù„ØªØ§Ù„ÙŠ</p>' +
                    '</div>';
                document.getElementById('nextToStep4').style.display = 'block';
                playSound('applauseSound');
            }
        }
    } else {
        // Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø®Ø§Ø·Ø¦Ø©
        input.className = 'wrong-answer';
        feedback.innerHTML = '<span style="color:red;font-size:1.5rem">âœ—</span> Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰! ØªØ£ÙƒØ¯ Ù…Ù† ØªØ±ØªÙŠØ¨ Ø§Ù„ÙƒÙ„Ù…Ø§Øª Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­.';
        feedback.className = 'feedback error-feedback';
        playSound('errorSound');
        
        // Ø¹Ø±Ø¶ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„ØµØ­ÙŠØ­Ø© Ø¨Ø¹Ø¯ Ø«Ø§Ù†ÙŠØªÙŠÙ†
        setTimeout(() => {
            feedback.innerHTML += `<br><small><strong>Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„ØµØ­ÙŠØ­Ø©:</strong> ${correctAnswersMap[orderNumber]}</small>`;
        }, 2000);
    }
}

// Ù…Ù„Ø¡ Ø§Ù„ÙØ±Ø§ØºØ§Øª Ø¨Ø§Ù„Ø¹ØµØ§ÙÙŠØ±
function fillGap(gapId, word) {
    const gap = document.getElementById(gapId);
    gap.value = word;
    gap.className = 'correct-answer';
    playSound('bellSound');
    
    // Ø¥Ø¶Ø§ÙØ© ØªØ£Ø«ÙŠØ± Ø¥Ø¶Ø§ÙÙŠ Ù„Ù„Ø®Ø¨Ø§Ø²
    if (word === 'Ø§Ù„Ø®Ø¨Ø§Ø²') {
        gap.style.background = 'linear-gradient(135deg, #fff3cd, #ffeaa7)';
        gap.style.borderColor = '#ffc107';
        gap.style.color = '#856404';
    }
}

// Ø§Ù„ØªØ­Ù‚Ù‚ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ - ØªÙ… Ø§Ù„ØªØ­Ø¯ÙŠØ« Ù„ÙŠØ´Ù…Ù„ "Ø§Ù„Ø®Ø¨Ø§Ø²"
function checkFinal() {
    const gaps = ['gap1', 'gap2', 'gap3', 'gap4'];
    const correctWords = ['Ù†ÙˆØ±', 'Ø§Ù„Ø±Ø­ÙŠÙ‚', 'Ø§Ù„Ø®Ø¨Ø§Ø²', 'Ø§Ù„Ø­Ù‚']; // ØªÙ… ØªØºÙŠÙŠØ± "Ø§Ù„Ø®Ø¨Ø²" Ø¥Ù„Ù‰ "Ø§Ù„Ø®Ø¨Ø§Ø²"
    let allCorrect = true;
    
    gaps.forEach((gapId, index) => {
        const gap = document.getElementById(gapId);
        const userAnswer = gap.value.trim();
        
        // Ø§Ù„ØªØ­Ù‚Ù‚ Ø§Ù„Ù…Ø±Ù† Ù„Ù„Ø¥Ø¬Ø§Ø¨Ø©
        let isCorrect = false;
        
        // Ù…Ø¹Ø§Ù„Ø¬Ø© Ø®Ø§ØµØ© Ù„ÙƒÙ„Ù…Ø© "Ø§Ù„Ø®Ø¨Ø§Ø²"
        if (index === 2) { // Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø«Ø§Ù„Ø« (Ø§Ù„Ø®Ø¨Ø§Ø²)
            // Ù‚Ø¨ÙˆÙ„ "Ø§Ù„Ø®Ø¨Ø§Ø²" Ø£Ùˆ "Ø§Ù„Ø®Ø¨Ù‘Ø§Ø²" Ù…Ø¹ Ø§Ù„Ø´Ø¯Ø©
            isCorrect = userAnswer === 'Ø§Ù„Ø®Ø¨Ø§Ø²' || 
                       userAnswer === 'Ø§Ù„Ø®Ø¨Ù‘Ø§Ø²' || 
                       userAnswer.replace('Ù‘', '') === 'Ø§Ù„Ø®Ø¨Ø§Ø²';
        } else {
            isCorrect = userAnswer === correctWords[index];
        }
        
        if (!isCorrect) {
            allCorrect = false;
            gap.className = 'wrong-answer';
        } else {
            gap.className = 'correct-answer';
            
            // ØªÙ„ÙˆÙŠÙ† Ø®Ø§Øµ Ù„Ù„Ø®Ø¨Ø§Ø²
            if (index === 2) {
                gap.style.background = 'linear-gradient(135deg, #fff3cd, #ffeaa7)';
                gap.style.borderColor = '#ffc107';
                gap.style.color = '#856404';
            }
        }
    });
    
    const finalFeedback = document.getElementById('final-feedback');
    
    if (allCorrect) {
        // Ø§Ø­ØªØ³Ø§Ø¨ Ø§Ù„Ù†Ù‚Ø§Ø· Ø§Ù„Ø¥Ø¶Ø§ÙÙŠØ© Ø¥Ø°Ø§ Ù„Ù… ØªÙƒÙ† Ù…Ø­Ø³ÙˆØ¨Ø©
        gaps.forEach(gapId => {
            if (!answeredQuestions.has(gapId)) {
                updateScore(10);
                answeredQuestions.add(gapId);
                correctAnswers++;
            }
        });
        
        playSound('applauseSound');
        
        // Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ù†Ø¬Ø§Ø­ Ù…Ø¹ ØªØ®ØµÙŠØµ Ù„Ù„Ø®Ø¨Ø§Ø²
        finalFeedback.innerHTML = 
            '<div style="background:linear-gradient(135deg,#4CAF50,#2E7D32);color:white;padding:25px;border-radius:20px;margin:20px 0;">' +
            '<h2 style="font-size:2rem;margin-bottom:10px;">ğŸŠ Ø£Ø­Ø³Ù†Øª ÙŠØ§ Ø¨Ø·Ù„! ğŸŠ</h2>' +
            '<p style="font-size:1.3rem;">Ø¥Ø¬Ø§Ø¨Ø§ØªÙƒ ÙƒÙ„Ù‡Ø§ ØµØ­ÙŠØ­Ø© ğŸŒŸ</p>' +
            '<p style="font-size:1.2rem;margin-top:10px;">Ù…Ù…ØªØ§Ø²! Ø¹Ø±ÙØª Ø£Ù† <strong>Ø§Ù„Ø®Ø¨Ø§Ø²</strong> ğŸ‘¨â€ğŸ³ Ù‡Ùˆ Ù…Ù† ÙŠÙ†Ø®Ù„ Ø§Ù„Ø¯Ù‚ÙŠÙ‚</p>' +
            '<p style="font-size:1.2rem;margin-top:10px;">Ù…Ø¬Ù…ÙˆØ¹ Ù†Ù‚Ø§Ø·Ùƒ: ' + score + ' Ù†Ù‚Ø·Ø© ğŸ†</p>' +
            '<p style="font-size:1.2rem;">Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª Ø§Ù„ØµØ­ÙŠØ­Ø©: ' + correctAnswers + ' Ù…Ù† ' + totalQuestions + ' âœ…</p>' +
            '</div>';
        finalFeedback.className = 'feedback success-feedback';
        
        // Ø¹Ø±Ø¶ Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ø¥Ù†Ø¬Ø§Ø²
        setTimeout(() => {
            const celebration = document.createElement('div');
            celebration.className = 'completion-celebration';
            celebration.innerHTML = 
                '<div style="text-align:center;background:white;padding:40px;border-radius:20px;box-shadow:0 10px 30px rgba(0,0,0,0.2);">' +
                '<h2 style="color:#2196F3;">ğŸ‰ Ù…Ø¨Ø±ÙˆÙƒ! ğŸ‰</h2>' +
                '<p style="font-size:1.5rem;margin:20px 0;">Ø£ÙƒÙ…Ù„Øª Ø§Ù„Ø¯Ø±Ø³ Ø¨Ù†Ø¬Ø§Ø­</p>' +
                '<p style="font-size:1.2rem;color:#4CAF50;">ÙˆØ®ØµÙˆØµØ§Ù‹ Ø¹Ø±ÙØª Ù…Ù‡Ù†Ø© <strong>Ø§Ù„Ø®Ø¨Ø§Ø²</strong> ğŸ‘¨â€ğŸ³</p>' +
                '<p style="font-size:1.1rem;margin-top:20px;">Ù†Ù‚Ø§Ø·Ùƒ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©: ' + score + ' ğŸ†</p>' +
                '</div>';
            document.body.appendChild(celebration);
            
            // Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø¨Ø¹Ø¯ 4 Ø«ÙˆØ§Ù†Ù
            setTimeout(() => {
                celebration.remove();
            }, 4000);
        }, 1000);
        
    } else {
        playSound('errorSound');
        finalFeedback.innerHTML = 
            '<div style="background:linear-gradient(135deg,#f44336,#d32f2f);color:white;padding:20px;border-radius:20px;margin:20px 0;">' +
            '<h3>âš ï¸ Ù‡Ù†Ø§Ùƒ Ø£Ø®Ø·Ø§Ø¡</h3>' +
            '<p>ØªØ£ÙƒØ¯ Ù…Ù† Ù…Ù„Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙØ±Ø§ØºØ§Øª Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­ Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ø¹ØµØ§ÙÙŠØ±!</p>' +
            '<p><small>ØªØ°ÙƒØ±: <strong>Ø§Ù„Ø®Ø¨Ø§Ø²</strong> ğŸ‘¨â€ğŸ³ Ù‡Ùˆ Ù…Ù† ÙŠÙ†Ø®Ù„ Ø§Ù„Ø¯Ù‚ÙŠÙ‚</small></p>' +
            '</div>';
        finalFeedback.className = 'feedback error-feedback';
        
        // ØªÙˆØ¬ÙŠÙ‡ Ø§Ù†ØªØ¨Ø§Ù‡ Ù„Ù„Ø®Ø¨Ø§Ø² Ø¥Ø°Ø§ ÙƒØ§Ù† Ù‡Ùˆ Ø§Ù„Ø®Ø·Ø£
        const gap3 = document.getElementById('gap3');
        if (gap3.value.trim() !== 'Ø§Ù„Ø®Ø¨Ø§Ø²' && gap3.value.trim() !== 'Ø§Ù„Ø®Ø¨Ù‘Ø§Ø²') {
            gap3.style.animation = 'shake 0.5s';
            setTimeout(() => {
                gap3.style.animation = '';
            }, 500);
        }
    }
}

// ØªÙ‡ÙŠØ¦Ø© Ø§Ù„ØµÙØ­Ø©
document.addEventListener('DOMContentLoaded', function() {
    // Ø¥Ø¶Ø§ÙØ© ØªØ£Ø«ÙŠØ± Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
    document.querySelector('.container').style.animation = 'fadeIn 0.8s';
    
    // Ø¥Ø¶Ø§ÙØ© Ø¯Ø¹Ù… Ù„ÙˆØ­Ø© Ø§Ù„Ù…ÙØ§ØªÙŠØ­
    document.addEventListener('keypress', function(e) {
        if (e.key === 'Enter') {
            const activeStep = document.querySelector('.step.active');
            const activeInput = activeStep.querySelector('input:focus');
            if (activeInput) {
                const inputId = activeInput.id;
                if (inputId.startsWith('order')) {
                    const num = inputId.replace('order', '');
                    checkOrder(num);
                } else if (inputId.startsWith('gap')) {
                    checkFinal();
                }
            }
        }
    });
    
    // Ø¥Ø¶Ø§ÙØ© Ø´Ø±Ø­ ØªÙØ§Ø¹Ù„ÙŠ Ù„Ù„Ø®Ø¨Ø§Ø²
    setTimeout(() => {
        const bakerBird = document.querySelector('.bird-profession');
        if (bakerBird) {
            bakerBird.addEventListener('mouseenter', function() {
                const tooltip = document.createElement('div');
                tooltip.innerHTML = 'ğŸ‘¨â€ğŸ³ Ø§Ù„Ø®Ø¨Ø§Ø²: Ù‡Ùˆ Ø§Ù„Ø´Ø®Øµ Ø§Ù„Ø°ÙŠ ÙŠØµÙ†Ø¹ Ø§Ù„Ø®Ø¨Ø² ÙˆÙŠÙ†Ø®Ù„ Ø§Ù„Ø¯Ù‚ÙŠÙ‚';
                tooltip.style.cssText = `
                    position: absolute;
                    background: #333;
                    color: white;
                    padding: 10px;
                    border-radius: 10px;
                    z-index: 1000;
                    font-size: 0.9rem;
                    width: 200px;
                    top: -80px;
                    right: 0;
                    box-shadow: 0 5px 15px rgba(0,0,0,0.2);
                `;
                tooltip.className = 'baker-tooltip';
                this.appendChild(tooltip);
            });
            
            bakerBird.addEventListener('mouseleave', function() {
                const tooltip = this.querySelector('.baker-tooltip');
                if (tooltip) {
                    tooltip.remove();
                }
            });
        }
    }, 1000);
});
</script>
</body>
</html>